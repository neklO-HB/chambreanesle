<%- include('partials/header', { title }) %>
<section class="container section form-section">
  <div>
    <p class="eyebrow">Réservation</p>
    <h1>Planifiez votre séjour</h1>
    <p class="lead">Renseignez vos dates, la chambre souhaitée et nous confirmons sous 24h.</p>
    <ul class="checklist">
      <li>Réservation sécurisée</li>
      <li>Confirmation envoyée par e-mail</li>
      <li>Annulation gratuite jusqu'à 72h avant l'arrivée</li>
    </ul>
  </div>

  <form method="post" action="/reservation" class="panel form">
    <% if (errors.length) { %>
    <div class="alert">
      <p><strong>Merci de corriger :</strong></p>
      <ul>
        <% errors.forEach((err) => { %>
        <li><%= err %></li>
        <% }) %>
      </ul>
    </div>
    <% } %>

    <label>
      Chambre
      <select name="roomSlug" required>
        <% rooms.forEach((room) => { %>
        <option value="<%= room.slug %>" <%= room.slug === form.roomSlug ? 'selected' : '' %>>
          <%= room.name %> — <%= formatPrice(room.price) %> / nuit
        </option>
        <% }) %>
      </select>
    </label>

    <div class="form-grid">
      <label>
        Arrivée
        <input type="date" name="startDate" value="<%= form.startDate %>" required />
      </label>
      <label>
        Départ
        <input type="date" name="endDate" value="<%= form.endDate %>" required />
      </label>
    </div>

    <label>
      Voyageurs
      <input type="number" name="guests" min="1" value="<%= form.guests %>" required />
    </label>

    <fieldset>
      <legend>Options</legend>
      <label class="checkbox">
        <input type="checkbox" name="extras" value="Petit déjeuner" <%= form.extras.includes('Petit déjeuner') ? 'checked' : '' %> />
        Petit déjeuner maison
      </label>
      <label class="checkbox">
        <input type="checkbox" name="extras" value="Accès spa" <%= form.extras.includes('Accès spa') ? 'checked' : '' %> />
        Accès spa & sauna
      </label>
      <label class="checkbox">
        <input type="checkbox" name="extras" value="Accueil romantique" <%= form.extras.includes('Accueil romantique') ? 'checked' : '' %> />
        Accueil romantique (fleurs + champagne)
      </label>
    </fieldset>

    <button type="submit" class="button full">Valider la demande</button>
  </form>
</section>
<%- include('partials/footer') %>
